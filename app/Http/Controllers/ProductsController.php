<?php namespace App\Http\Controllers;use App\Models\categories;use App\Models\products;use App\Models\units;use Illuminate\Http\Request;class ProductsController extends Controller{public function index(){$items=products::with('category','unit')->get();$cats=categories::orderBy('name','asc')->get();return view('products.product',compact('items','cats'));}public function create(){}public function store(Request $request){$request->validate(['code'=>"unique:products,code",],['code.unique'=>"Product Code already In Use",]);products::create($request->all());return back()->with('success','Product Created');}public function show(products $products){}public function edit(products $products){}public function update(Request $request,$id){$request->validate(['code'=>"unique:products,code,".$id,],['code.unique'=>"Product code already in Use",]);$product=products::find($id);$product->update($request->all());return back()->with('success','Product Updated');}public function destroy(products $products){}public function ajaxCreate(request $request){$check=products::where('name',$request->name)->count();if($check>0){return response()->json(['response'=>"Exists",]);}$product=products::create($request->all());return response()->json(['response'=>$product->id,]);}public function barcodePrint($id){$product=products::find($id);return view('products.barcode',compact('product'));}public function generateCode(){gen:$value=rand(1111111111,9999999999);$check=products::where('code',"C$value")->count();if($check>0){goto gen;}return"C$value";}}